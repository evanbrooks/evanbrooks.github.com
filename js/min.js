function isiPhone(){return-1!=navigator.platform.indexOf("iPhone")||-1!=navigator.platform.indexOf("iPod")}(function(a){a.fn.afterTransition=function(a){var d=this;d.on("webkitTransitionEnd mozTransitionEnd",function(){a();d.off("webkitTransitionEnd mozTransitionEnd")})}})(jQuery);(function(a){a.fn.freeze=function(){this.addClass("no-trans");return this}})(jQuery);(function(a){a.fn.unfreeze=function(){this.removeClass("no-trans");return this}})(jQuery);
(function(a,b){var d="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";a.fn.imagesLoaded=function(f){function k(){var e=a(h),d=a(j);g&&(j.length?g.reject(n,e,d):g.resolve(n));a.isFunction(f)&&f.call(p,n,e,d)}function l(h){m(h.target,"error"===h.type)}function m(e,b){e.src===d||-1!==a.inArray(e,q)||(q.push(e),b?j.push(e):h.push(e),a.data(e,"imagesLoaded",{isBroken:b,src:e.src}),r&&g.notifyWith(a(e),[b,n,a(h),a(j)]),n.length===q.length&&(setTimeout(k),n.unbind(".imagesLoaded",
l)))}var p=this,g=a.isFunction(a.Deferred)?a.Deferred():0,r=a.isFunction(g.notify),n=p.find("img").add(p.filter("img")),q=[],h=[],j=[];a.isPlainObject(f)&&a.each(f,function(h,a){if("callback"===h)f=a;else if(g)g[h](a)});n.length?n.bind("load.imagesLoaded error.imagesLoaded",l).each(function(h,j){var f=j.src,g=a.data(j,"imagesLoaded");if(g&&g.src===f)m(j,g.isBroken);else if(j.complete&&j.naturalWidth!==b)m(j,0===j.naturalWidth||0===j.naturalHeight);else if(j.readyState||j.complete)j.src=d,j.src=f}):
k();return g?g.promise(p):p}})(jQuery);(function(){var a=function(h,a){var e=h.style[a];h.currentStyle?e=h.currentStyle[a]:window.getComputedStyle&&(e=document.defaultView.getComputedStyle(h,null).getPropertyValue(a));if("auto"==e&&"cursor"==a)for(var b=["a"],d=0;d<b.length;d++)if(h.tagName.toLowerCase()==b[d])return"pointer";return e},b=function(h){if(g.prototype._singleton){h||(h=window.event);var a;this!==window?a=this:h.target?a=h.target:h.srcElement&&(a=h.srcElement);g.prototype._singleton.setCurrent(a)}},d=function(a,j){if(a.addClass)return a.addClass(j),
a;if(j&&"string"==typeof j){var e=(j||"").split(/\s+/);if(1===a.nodeType)if(a.className){for(var d=" "+a.className+" ",b=a.className,f=0,g=e.length;f<g;f++)0>d.indexOf(" "+e[f]+" ")&&(b+=" "+e[f]);a.className=b.replace(/^\s+|\s+$/g,"")}else a.className=j}return a},f=function(a,j){if(a.removeClass)return a.removeClass(j),a;if(j&&"string"==typeof j||void 0===j){var e=(j||"").split(/\s+/);if(1===a.nodeType&&a.className)if(j){for(var b=(" "+a.className+" ").replace(/[\n\t]/g," "),d=0,f=e.length;d<f;d++)b=
b.replace(" "+e[d]+" "," ");a.className=b.replace(/^\s+|\s+$/g,"")}else a.className=""}return a},k=function(a){return(0<=a.indexOf("?")?"&":"?")+"nocache="+(new Date).getTime()},l=function(a){var j=[];return a.trustedDomains&&("string"==typeof a.trustedDomains?j.push("trustedDomain="+a.trustedDomains):j.push("trustedDomain="+a.trustedDomains.join(","))),j.join("&")},m=function(a,j){if(j.indexOf)return j.indexOf(a);for(var e=0,b=j.length;e<b;e++)if(j[e]===a)return e;return-1},p=function(a){if("string"==
typeof a)throw new TypeError("ZeroClipboard doesn't accept query strings.");return a.length?a:[a]},g=function(a,j){a&&(g.prototype._singleton||this).glue(a);if(g.prototype._singleton)return g.prototype._singleton;g.prototype._singleton=this;this.options={};for(var e in q)this.options[e]=q[e];for(var b in j)this.options[b]=j[b];this.handlers={};g.detectFlashSupport()&&(e=g.prototype._singleton,e.htmlBridge=document.getElementById("global-zeroclipboard-html-bridge"),e.htmlBridge||(b='    <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">       <param name="movie" value="'+
e.options.moviePath+k(e.options.moviePath)+'"/>       <param name="allowScriptAccess" value="always" />       <param name="scale" value="exactfit">       <param name="loop" value="false" />       <param name="menu" value="false" />       <param name="quality" value="best" />       <param name="bgcolor" value="#ffffff" />       <param name="wmode" value="transparent"/>       <param name="flashvars" value="'+l(e.options)+'"/>       <embed src="'+e.options.moviePath+k(e.options.moviePath)+'"         loop="false" menu="false"         quality="best" bgcolor="#ffffff"         width="100%" height="100%"         name="global-zeroclipboard-flash-bridge"         allowScriptAccess="always"         allowFullScreen="false"         type="application/x-shockwave-flash"         wmode="transparent"         pluginspage="http://www.macromedia.com/go/getflashplayer"         flashvars="'+
l(e.options)+'"         scale="exactfit">       </embed>     </object>',e.htmlBridge=document.createElement("div"),e.htmlBridge.id="global-zeroclipboard-html-bridge",e.htmlBridge.setAttribute("class","global-zeroclipboard-container"),e.htmlBridge.setAttribute("data-clipboard-ready",!1),e.htmlBridge.style.position="absolute",e.htmlBridge.style.left="-9999px",e.htmlBridge.style.top="-9999px",e.htmlBridge.style.width="15px",e.htmlBridge.style.height="15px",e.htmlBridge.style.zIndex="9999",e.htmlBridge.innerHTML=
b,document.body.appendChild(e.htmlBridge)),e.flashBridge=document["global-zeroclipboard-flash-bridge"])},r,n=[];g.prototype.setCurrent=function(h){r=h;this.reposition();this.htmlBridge.setAttribute("data-clipboard-text",this.options.text||h.getAttribute("data-clipboard-text"));this.ready()&&this.flashBridge.setText(this.options.text||h.getAttribute("data-clipboard-text"));h.getAttribute("title")&&this.setTitle(h.getAttribute("title"));this.setHandCursor("pointer"==a(h,"cursor"))};g.prototype.setText=
function(a){a&&""!==a&&(this.options.text=a,this.ready()&&this.flashBridge.setText(a))};g.prototype.setTitle=function(a){a&&""!==a&&this.htmlBridge.setAttribute("title",a)};g.prototype.setSize=function(a,b){this.ready()&&this.flashBridge.setSize(a,b)};g.prototype.setHandCursor=function(a){this.ready()&&this.flashBridge.setHandCursor(a)};g.version="1.1.7";var q={moviePath:"ZeroClipboard.swf",trustedDomains:null,text:null,hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active"};g.setDefaults=
function(a){for(var b in a)q[b]=a[b]};g.destroy=function(){g.prototype._singleton.unglue(n);var a=g.prototype._singleton.htmlBridge;a.parentNode.removeChild(a);delete g.prototype._singleton};g.detectFlashSupport=function(){var a=!1;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(a=!0)}catch(b){navigator.mimeTypes["application/x-shockwave-flash"]&&(a=!0)}return a};g.prototype.resetBridge=function(){this.htmlBridge.style.left="-9999px";this.htmlBridge.style.top="-9999px";this.htmlBridge.removeAttribute("title");
this.htmlBridge.removeAttribute("data-clipboard-text");f(r,this.options.activeClass);r=null;this.options.text=null};g.prototype.ready=function(){var a=this.htmlBridge.getAttribute("data-clipboard-ready");return"true"===a||!0===a};g.prototype.reposition=function(){if(!r)return!1;var b=r,d=0,e=0,f=b.width||b.offsetWidth||0,g=b.height||b.offsetHeight||0,l=9999,k=a(b,"zIndex");for(k&&"auto"!=k&&(l=parseInt(k,10));b;)var k=parseInt(a(b,"borderLeftWidth"),10),m=parseInt(a(b,"borderTopWidth"),10),d=d+(isNaN(b.offsetLeft)?
0:b.offsetLeft),d=d+(isNaN(k)?0:k),e=e+(isNaN(b.offsetTop)?0:b.offsetTop),e=e+(isNaN(m)?0:m),b=b.offsetParent;this.htmlBridge.style.top=e+"px";this.htmlBridge.style.left=d+"px";this.htmlBridge.style.width=f+"px";this.htmlBridge.style.height=g+"px";this.htmlBridge.style.zIndex=l+1;this.setSize(f,g)};g.dispatch=function(a,b){g.prototype._singleton.receiveEvent(a,b)};g.prototype.on=function(a,b){for(var e=a.toString().split(/\s/g),d=0;d<e.length;d++)a=e[d].toLowerCase().replace(/^on/,""),this.handlers[a]||
(this.handlers[a]=b);this.handlers.noflash&&!g.detectFlashSupport()&&this.receiveEvent("onNoFlash",null)};g.prototype.addEventListener=g.prototype.on;g.prototype.receiveEvent=function(a,b){a=a.toString().toLowerCase().replace(/^on/,"");var e=r;switch(a){case "load":if(b&&10>parseFloat(b.flashVersion.replace(",",".").replace(/[^0-9\.]/gi,""))){this.receiveEvent("onWrongFlash",{flashVersion:b.flashVersion});return}this.htmlBridge.setAttribute("data-clipboard-ready",!0);break;case "mouseover":d(e,this.options.hoverClass);
break;case "mouseout":f(e,this.options.hoverClass);this.resetBridge();break;case "mousedown":d(e,this.options.activeClass);break;case "mouseup":f(e,this.options.activeClass);break;case "complete":this.options.text=null}if(this.handlers[a]){var g=this.handlers[a];"function"==typeof g?g.call(e,this,b):"string"==typeof g&&window[g].call(e,this,b)}};g.prototype.glue=function(a){a=p(a);for(var d=0;d<a.length;d++)if(-1==m(a[d],n)){n.push(a[d]);var e=a[d],f=b;e.addEventListener?e.addEventListener("mouseover",
f,!1):e.attachEvent&&e.attachEvent("onmouseover",f)}};g.prototype.unglue=function(a){a=p(a);for(var d=0;d<a.length;d++){var e=a[d],f=b;e.removeEventListener?e.removeEventListener("mouseover",f,!1):e.detachEvent&&e.detachEvent("onmouseover",f);e=m(a[d],n);-1!=e&&n.splice(e,1)}};"undefined"!=typeof module?module.exports=g:window.ZeroClipboard=g})();function ContentGetter(){function a(){console.log(window.location.hash);""!==window.location.hash?(whichItem=window.location.hash.split("#"),whichItem=whichItem[1].replace("/",""),proj.viewItemPop(whichItem)):proj.clearItem()}function b(a){document.title="Evan Brooks \u2014 "+a}this.getItem=function(a,k,l){history.pushState({},"","#/"+a);url="/project/"+a+".md";b(k);$.ajax(url).done(function(a){a=d.makeHtml(a);l(a)}).error(function(){l("I don't have anything here right now. <a href='mailto:hello@evn.io?subject=I have a question%20'>Get in touch</a> if you have any questions.")})};
this.clearItem=function(){history.pushState({},"","/");b("Portfolio")};var d=new Showdown.converter({extensions:["showmore","fig","vid"]});this.listen=function(){window.addEventListener("popstate",a);-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&a()}};function Lightbox(){var a,b=$(".lightbox"),d,f,k,l;this.viewImage=function(m){m.preventDefault();a=$(m.target);src=a.attr("src");f=a.width();d=a.height();k=a.position().top;l=a.position().left;endW=wind.width();endH=wind.height();nW=a.get(0).naturalWidth;nH=a.get(0).naturalHeight;marg=endH/2;nH<endH&&(marg=nH/2);b.find("img").attr("src",src);b.off().show().css({"-webkit-transition":"none",width:f,height:d,top:k,left:l}).fadeIn().css({"-webkit-transition":"all 0.3s",width:endW,height:endH,"margin-top":-1*
marg+"px",top:endH/2,left:0});a.addClass("being-viewed");body.addClass("viewing-lightbox")};this.clearImage=function(m){m.preventDefault();b.css({"margin-top":0,width:f,height:d,top:k,left:l,"-webkit-transform":"none"}).afterTransition(function(){a.removeClass("being-viewed");body.removeClass("viewing-lightbox");b.fadeOut()})}};window.Swipe=function(a,b){if(!a)return null;this.options=b||{};this.index=this.options.startSlide||0;this.speed=this.options.speed||300;this.callback=this.options.callback||function(){};this.delay=this.options.auto||0;this.container=a;this.element=this.container.children[0];this.container.style.overflow="hidden";this.element.style.listStyle="none";this.element.style.margin=0;this.setup();this.begin();this.element.addEventListener&&(this.element.addEventListener("touchstart",this,!1),this.element.addEventListener("touchmove",
this,!1),this.element.addEventListener("touchend",this,!1),this.element.addEventListener("touchcancel",this,!1),this.element.addEventListener("webkitTransitionEnd",this,!1),this.element.addEventListener("msTransitionEnd",this,!1),this.element.addEventListener("oTransitionEnd",this,!1),this.element.addEventListener("transitionend",this,!1),window.addEventListener("resize",this,!1))};
Swipe.prototype={setup:function(){this.slides=this.element.children;this.length=this.slides.length;if(2>this.length)return null;this.width=Math.ceil("getBoundingClientRect"in this.container?this.container.getBoundingClientRect().width:this.container.offsetWidth);if(!this.width)return null;this.container.style.visibility="hidden";this.element.style.width=Math.ceil(this.slides.length*this.width)+"px";for(var a=this.slides.length;a--;){var b=this.slides[a];b.style.width=this.width+"px";b.style.display=
"inline-block";b.style.verticalAlign="top"}this.slide(this.index,0);this.container.style.visibility="visible"},slide:function(a,b){var d=this.element.style;void 0==b&&(b=this.speed);d.webkitTransitionDuration=d.MozTransitionDuration=d.msTransitionDuration=d.OTransitionDuration=d.transitionDuration=b+"ms";d.MozTransform=d.webkitTransform="translate3d("+-(a*this.width)+"px,0,0)";d.msTransform=d.OTransform="translateX("+-(a*this.width)+"px)";this.index=a},getPos:function(){return this.index},prev:function(a){this.delay=
a||0;clearTimeout(this.interval);this.index?this.slide(this.index-1,this.speed):this.slide(this.length-1,this.speed)},next:function(a){this.delay=a||0;clearTimeout(this.interval);this.index<this.length-1?this.slide(this.index+1,this.speed):this.slide(0,this.speed)},begin:function(){var a=this;this.interval=this.delay?setTimeout(function(){a.next(a.delay)},this.delay):0},stop:function(){this.delay=0;clearTimeout(this.interval)},resume:function(){this.delay=this.options.auto||0;this.begin()},handleEvent:function(a){switch(a.type){case "touchstart":this.onTouchStart(a);
break;case "touchmove":this.onTouchMove(a);break;case "touchcancel":case "touchend":this.onTouchEnd(a);break;case "webkitTransitionEnd":case "msTransitionEnd":case "oTransitionEnd":case "transitionend":this.transitionEnd(a);break;case "resize":this.setup()}},transitionEnd:function(a){this.delay&&this.begin();this.callback(a,this.index,this.slides[this.index])},onTouchStart:function(a){this.start={pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,time:Number(new Date)};this.isScrolling=void 0;this.deltaX=
0;this.element.style.MozTransitionDuration=this.element.style.webkitTransitionDuration=0;a.stopPropagation()},onTouchMove:function(a){1<a.touches.length||a.scale&&1!==a.scale||(this.deltaX=a.touches[0].pageX-this.start.pageX,"undefined"==typeof this.isScrolling&&(this.isScrolling=!!(this.isScrolling||Math.abs(this.deltaX)<Math.abs(a.touches[0].pageY-this.start.pageY))),this.isScrolling||(a.preventDefault(),clearTimeout(this.interval),this.deltaX/=!this.index&&0<this.deltaX||this.index==this.length-
1&&0>this.deltaX?Math.abs(this.deltaX)/this.width+1:1,this.element.style.MozTransform=this.element.style.webkitTransform="translate3d("+(this.deltaX-this.index*this.width)+"px,0,0)",a.stopPropagation()))},onTouchEnd:function(a){var b=250>Number(new Date)-this.start.time&&20<Math.abs(this.deltaX)||Math.abs(this.deltaX)>this.width/2,d=!this.index&&0<this.deltaX||this.index==this.length-1&&0>this.deltaX;this.isScrolling||this.slide(this.index+(b&&!d?0>this.deltaX?1:-1:0),this.speed);a.stopPropagation()}};var Showdown={extensions:{}},forEach=Showdown.forEach=function(a,b){if("function"==typeof a.forEach)a.forEach(b);else{var d,f=a.length;for(d=0;d<f;d++)b(a[d],d,a)}},stdExtName=function(a){return a.replace(/[_-]||\s/g,"").toLowerCase()};
Showdown.converter=function(a){var b,d,f,k=0,l=[],m=[];if("undefind"!=typeof module&&"undefined"!=typeof exports&&"undefind"!=typeof require){var p=require("fs");p&&(p=p.readdirSync((__dirname||".")+"/extensions").filter(function(a){return~a.indexOf(".js")}).map(function(a){return a.replace(/\.js$/,"")}),Showdown.forEach(p,function(a){var c=stdExtName(a);Showdown.extensions[c]=require("./extensions/"+a)}))}this.makeHtml=function(a){b={};d={};f=[];a=a.replace(/~/g,"~T");a=a.replace(/\$/g,"~D");a=a.replace(/\r\n/g,
"\n");a=a.replace(/\r/g,"\n");a="\n\n"+a+"\n\n";a=y(a);a=a.replace(/^[ \t]+$/mg,"");Showdown.forEach(l,function(c){a=r(c,a)});var c=a;a=(c+="~0",c=c.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(a,c,x){a=x;return a=w(a),a=y(a),a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,""),a="<pre><code"+(c?' class="'+c+'"':"")+">"+a+"\n</code></pre>",s(a)}),c=c.replace(/~0/,""),c);c=a=n(a);return a=(c+="~0",c=c.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|(?=~0))/gm,
function(a,c,x,e,f){return c=c.toLowerCase(),b[c]=D(x),e?e+f:(f&&(d[c]=f.replace(/"/g,"&quot;")),"")}),c=c.replace(/~0/,""),c),a=h(a),a=E(a),a=a.replace(/~D/g,"$$"),a=a.replace(/~T/g,"~"),Showdown.forEach(m,function(c){a=r(c,a)}),a};if(a&&a.extensions){var g=this;Showdown.forEach(a.extensions,function(a){"string"==typeof a&&(a=Showdown.extensions[stdExtName(a)]);if("function"!=typeof a)throw"Extension '"+a+"' could not be loaded.  It was either not found or is not a valid extension.";Showdown.forEach(a(g),
function(a){a.type?"language"===a.type||"lang"===a.type?l.push(a):("output"===a.type||"html"===a.type)&&m.push(a):m.push(a)})})}var r=function(a,c){if(a.regex)return c.replace(RegExp(a.regex,"g"),a.replace);if(a.filter)return a.filter(c)},n=function(a){a=a.replace(/\n/g,"\n\n");return a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,q),a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,
q),a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,q),a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,q),a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,q),a=a.replace(/\n\n/g,"\n"),a},q=function(a,c){var b=c;return b=b.replace(/\n\n/g,"\n"),b=b.replace(/^\n/,""),b=b.replace(/\n+$/g,""),b="\n\n~K"+(f.push(b)-1)+"K\n\n",b},h=function(a){var c=a,b=function(a){return a.replace(/[^\w]/g,"").toLowerCase()};a=(c=c.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,
function(a,c){return s('<h1 id="'+b(c)+'">'+j(c)+"</h1>")}),c=c.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,c){return s('<h2 id="'+b(c)+'">'+j(c)+"</h2>")}),c=c.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,c,d){a=c.length;return s("<h"+a+' id="'+b(d)+'">'+j(d)+"</h"+a+">")}),c);c=s("<hr />");a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,c);a=a.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,c);a=a.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,c);c=a=C(a);c=a=(c+="~0",c=c.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,
function(a,c,b){a=c;return a=w(z(a)),a=y(a),a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,""),a="<pre><code>"+a+"\n</code></pre>",s(a)+b}),c=c.replace(/~0/,""),c);a=(c=c.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,c){var b=c;return b=b.replace(/^[ \t]*>[ \t]?/gm,"~0"),b=b.replace(/~0/g,""),b=b.replace(/^[ \t]+$/gm,""),b=h(b),b=b.replace(/(^|\n)/g,"$1  "),b=b.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,c){var b=c;return b=b.replace(/^  /mg,"~0"),b=b.replace(/~0/g,""),b}),s("<blockquote>\n"+
b+"\n</blockquote>")}),c);a=n(a);for(var c=a.replace(/^\n+/g,""),c=c.replace(/\n+$/g,""),d=c.split(/\n{2,}/g),c=[],e=d.length,g=0;g<e;g++){var l=d[g];0<=l.search(/~K(\d+)K/g)?c.push(l):0<=l.search(/\S/)&&(l=j(l),l=l.replace(/^([ \t]*)/g,"<p>"),l+="</p>",c.push(l))}e=c.length;for(g=0;g<e;g++)for(;0<=c[g].search(/~K(\d+)K/);)d=f[RegExp.$1],d=d.replace(/\$/g,"$$$$"),c[g]=c[g].replace(/~K\d+K/,d);return a=c.join("\n\n"),a},j=function(a){var c=a,c=a=(c=c.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,
c,b,d){a=d;return a=a.replace(/^([ \t]*)/g,""),a=a.replace(/[ \t]*$/g,""),a=w(a),c+"<code>"+a+"</code>"}),c),c=a=(c=c.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi,function(a){a=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return a=u(a,"\\`*_"),a}),c),c=a=(c=c.replace(/\\(\\)/g,A),c=c.replace(/\\([`*_{}\[\]()>#+-.!])/g,A),c),c=a=(c=c.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,B),c=c.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,B),c),c=a=
(c=c.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,e),c=c.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,e),c=c.replace(/(\[([^\[\]]+)\])()()()()()/g,e),c);a=(c=c.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),c=c.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,c){var b=E(c),d=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){return"&#x"+a.charCodeAt(0).toString(16)+
";"},function(a){return a}];return b="mailto:"+b,b=b.replace(/./g,function(a){if("@"==a)a=d[Math.floor(2*Math.random())](a);else if(":"!=a){var c=Math.random();a=0.9<c?d[2](a):0.45<c?d[1](a):d[0](a)}return a}),b='<a href="'+b+'">'+b+"</a>",b=b.replace(/">.+:/g,'">'),b}),c);c=a=D(a);return a=(c=c.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),c=c.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"),c),a=a.replace(/  +\n/g," <br />\n"),a},e=function(a,c,e,f,g,j,l,h){void 0==h&&(h=
"");a=f.toLowerCase();if(""==g)if(""==a&&(a=e.toLowerCase().replace(/ ?\n/g," ")),void 0!=b[a])g=b[a],void 0!=d[a]&&(h=d[a]);else{if(!(-1<c.search(/\(\s*\)$/m)))return c;g=""}g=u(g,"*_");c='<a href="'+g+'"';return""!=h&&(h=h.replace(/"/g,"&quot;"),h=u(h,"*_"),c+=' title="'+h+'"'),c+=">"+e+"</a>",c},B=function(a,c,e,f,g,j,l,h){a=e;f=f.toLowerCase();h||(h="");if(""==g){""==f&&(f=a.toLowerCase().replace(/ ?\n/g," "));if(void 0==b[f])return c;g=b[f];void 0!=d[f]&&(h=d[f])}a=a.replace(/"/g,"&quot;");g=
u(g,"*_");c='<img src="'+g+'" alt="'+a+'"';return h=h.replace(/"/g,"&quot;"),h=u(h,"*_"),c+=' title="'+h+'"',c+=" />",c},v,C=function(a){a+="~0";var c=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return k?a=a.replace(c,function(a,c,b){a=c;b=-1<b.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=v(a);return a=a.replace(/\s+$/,""),a="<"+b+">"+a+"</"+b+">\n",a}):(c=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,
a=a.replace(c,function(a,c,b,d){a=b;d=-1<d.search(/[*+-]/g)?"ul":"ol";a=a.replace(/\n{2,}/g,"\n\n\n");a=v(a);return a=c+"<"+d+">\n"+a+"</"+d+">\n",a})),a=a.replace(/~0/,""),a};v=function(a){return k++,a=a.replace(/\n{2,}$/,"\n"),a+="~0",a=a.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(a,b,d,e,f){a=f;return b||-1<a.search(/\n{2,}/)?a=h(z(a)):(a=C(z(a)),a=a.replace(/\n$/,""),a=j(a)),"<li>"+a+"</li>\n"}),a=a.replace(/~0/g,""),k--,a};var s=
function(a){return a=a.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(f.push(a)-1)+"K\n\n"},w=function(a){return a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=u(a,"*_{}[]\\",!1),a},D=function(a){return a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;"),a},E=function(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var d=parseInt(b);return String.fromCharCode(d)}),a},z=function(a){return a=a.replace(/^(\t|[ ]{1,4})/gm,"~0"),a=a.replace(/~0/g,
""),a},y=function(a){return a=a.replace(/\t(?=\t)/g,"    "),a=a.replace(/\t/g,"~A~B"),a=a.replace(/~B(.+?)~A/g,function(a,b){for(var d=b,e=4-d.length%4,f=0;f<e;f++)d+=" ";return d}),a=a.replace(/~A/g,"    "),a=a.replace(/~B/g,""),a},u=function(a,b,d){b="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";d&&(b="\\\\"+b);return a=a.replace(RegExp(b,"g"),A),a},A=function(a,b){return"~E"+b.charCodeAt(0)+"E"}};"undefined"!=typeof module&&(module.exports=Showdown);
"function"==typeof define&&define.amd&&define("showdown",function(){return Showdown});(function(){"undefined"!==typeof window&&(window.Showdown&&window.Showdown.extensions)&&(window.Showdown.extensions.fig=function(){return[{type:"lang",regex:"(fig\\[)([^~]+?)(\\])",replace:function(a,b,d){parts=d.split('"');img=parts[0].split(",");a="";for(b=0;b<img.length;b++)a+="<img src='"+img[b]+"' />";1<parts.length&&(a+="<h5>"+parts[1]+"</h5>");return"<figure>"+a+"</figure>"}}]});"undefined"!==typeof window&&(window.Showdown&&window.Showdown.extensions)&&(window.Showdown.extensions.vid=function(){return[{type:"lang",
regex:"(vid\\[)([^~]+?)(\\])",replace:function(a,b,d){parts=d.split('"');src=parts[0].split(",");a="";for(b=0;b<src.length;b++)a+="<source src='"+src[b]+"' />";b="";1<parts.length&&(b+="<h5>"+parts[1]+"</h5>");return'<figure class="bleed"><video loop autoplay="autoplay" webkit-playsinline>'+a+"</video>"+b+"</figure>"}}]});"undefined"!==typeof window&&(window.Showdown&&window.Showdown.extensions)&&(window.Showdown.extensions.showmore=function(){return[{type:"output",filter:function(a){return a.replace(/<p>%aside<\/p>/gi,
function(){return"<aside>"})}},{type:"output",filter:function(a){return a.replace(/<p>%endaside<\/p>/gi,function(){return"</aside>"})}}]})})();var iphone=isiPhone(),wind=$(window),html=$("html"),index=$(".scroller"),body=$("body, html"),slide=$("article"),itemData=[],lb=new Lightbox,scroller=new Scroller,proj=new Projectbox(".project"),cont=new ContentGetter,spinner='<div id="spinner"><span></span><span></span><span></span></div>',ex='<div id="ex">\u2715</div>';bindHandlers();cont.listen();setupZClip();
function bindHandlers(){iphone||wind.scroll(scroller.scrolling);wind.resize(refresh);html.on("click","[data-item-name]",proj.viewItemClick).on("click","[data-item-link]",proj.viewItemInterLink).on("click","#spinner, #ex, .project-back",proj.clearItemClick).on("click",".lightbox, .lightbox-back .ex",lb.clearImage)}
function Scroller(){function a(){topScroll=wind.scrollTop();midScroll=topScroll+wind.height()/2;bottomScroll=topScroll+wind.height();var a=!1;$.each(itemData,function(d,f){a?(f.div.attr("data-position","below"),"undefined"!=typeof f.vid&&f.vid.pause()):(f.top<topScroll&&(f.div.attr("data-position","above"),"undefined"!=typeof f.vid&&f.vid.pause()),f.top>topScroll&&f.top<midScroll&&(f.div.attr("data-position","current"),"undefined"!=typeof f.vid&&f.vid.play(),a=!0))})}this.scrolling=a;refresh();a()}
function Projectbox(){function a(){k=f.attr("data-item-name");t=f.attr("data-title");d=$(f).siblings(".details");elparent=$(f).parent();elparent.addClass("loading "+k);f.append(spinner);f.before(ex);d.html("");$("#favicon").attr("href","/"+k+"/favicon.png");cont.getItem(k,t,function(a){setTimeout(function(){d.css("height",wind.height());d.afterTransition(function(){d.html(a);body.addClass("viewing-item");d.imagesLoaded(function(){d.freeze().css("height","auto").fadeIn().unfreeze();elparent.removeClass("loading");
analytics.track("Viewed "+k);"function"==typeof initiateProject&&initiateProject()})})},500)});f.html();pos=f.parent().offset().top-1;body.animate({scrollTop:pos},200,function(){elparent.addClass("current")});body.afterTransition(function(){})}function b(a){$("#favicon").attr("href","img/favicon.png");"undefined"==typeof a&&(a=function(){});f&&(d.freeze().css({height:wind.height(),opacity:1}).fadeIn().unfreeze().fadeIn().removeAttr("style"),$("#spinner").remove(),elparent.removeClass("current"),body.removeClass("viewing-item"),
elparent.removeClass(k),setTimeout(function(){d.html("");f=null;$("#ex").remove();analytics.track("Closed "+k);refresh();a()},500))}var d,f=null,k;this.viewItemPop=function(d){null!==f&&b();f=$("[data-item-name = "+d+"]");1>f.length&&(f=$("#missing"));a()};this.viewItemInterLink=function(d){d.preventDefault();str=$(d.target).attr("data-item-link");analytics.track("Interlink to "+str);b(function(){f=$("[data-item-name = "+str+"]");a()})};this.viewItemClick=function(d){function k(){f=$(d.target);f.hasClass("item-name")||
(f=f.parent());a()}d.preventDefault();null!==f?body.animate({scrollTop:pos},200,function(){b(k)}):k()};this.clearItem=b;this.clearItemClick=function(a){a.preventDefault();body.animate({scrollTop:pos},200,function(){cont.clearItem();b(function(){})})}}function refresh(){$(".item > figure").hide().fadeOut().show();itemData=[];$.each($(".item"),function(a,b){var d=$(b),f=d.find("video").get(0);itemData[a]={div:d,top:d.offset().top,bottom:d.offset().top+d.innerHeight(),vid:f}})}
function setupZClip(){ZeroClipboard.setDefaults({moviePath:"/js/zeroclip.swf"});var a=$("#copybtn"),b=new ZeroClipboard,d=$("#global-zeroclipboard-html-bridge").remove(),d=$(d).removeAttr("style").css({position:"absolute",left:"100%",top:"0",width:60+a.width()+"px",height:a.height()+"px","z-index":999});a.parent().before(d);b.on("load",function(){setTimeout(function(){b.setText(a.attr("data-clipboard-text"));a.parent().addClass("loaded");$(".flash-wrapper").on("click",function(a){a.preventDefault()})},
200)});b.on("complete",function(){a.parent().addClass("done open");setTimeout(function(){a.parent().removeClass("open")},2E3);setTimeout(function(){a.parent().removeClass("done")},2200);analytics.track("copied email")})};
