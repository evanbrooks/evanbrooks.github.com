(function(a){a.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage"]};a.expr[":"].uncached=function(d){if(!a(d).is('img[src!=""]'))return!1;var f=new Image;return f.src=d.src,!f.complete};a.fn.waitForImages=function(d,f,c){var m=0,e=0;a.isPlainObject(d)&&(d=d.finished,f=d.each,c=d.waitForAll);d=d||a.noop;f=f||a.noop;c=!!c;if(!a.isFunction(d)||!a.isFunction(f))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var g=
a(this),h=[],n=a.waitForImages.hasImageProperties||[],q=/url\(\s*(['"]?)(.*?)\1\s*\)/g;c?g.find("*").andSelf().each(function(){var d=a(this);d.is("img:uncached")&&h.push({src:d.attr("src"),element:d[0]});a.each(n,function(a,c){var f=d.css(c),e;if(!f)return!0;for(;e=q.exec(f);)h.push({src:e[2],element:d[0]})})}):g.find("img:uncached").each(function(){h.push({src:this.src,element:this})});m=h.length;e=0;0===m&&d.call(g[0]);a.each(h,function(c,h){var t=new Image;a(t).bind("load.waitForImages error.waitForImages",
function(a){e++;f.call(h.element,e,m,"load"==a.type);if(e==m)return d.call(g[0]),!1});t.src=h.src})})}})(jQuery);function draggingSetup(){function a(a){view==ITEM?(!0==a.touches?(c=a.changedTouches[0].pageX,m=a.changedTouches[0].pageY):(c=a.pageX,m=a.pageY),h=!0,p=r,IS_TOUCH||$body.addClass("dragging"),0>=$viewScroll.scrollTop()?$viewScroll.scrollTop(1):$viewScroll.scrollTop()+$(window).height()>=$viewScroll.height()&&(s=$viewScroll.scrollTop()-1,$viewScroll.scrollTop(s))):view==INDEX&&(0>=$index.scrollTop()?$index.scrollTop(1):$index.scrollTop()+$(window).height()>=$index.height()&&(s=$index.scrollTop()-1,
$index.scrollTop(s)))}function d(a){if(view==ITEM&&!0==h)if(!0==a.touches?(e=a.targetTouches[0].pageX-c,g=a.targetTouches[0].pageY-m):(e=a.pageX-c,g=a.pageY-m),p==r){if($view.css("-webkit-transform","translate3d("+e+"px,0,0)"),5<Math.abs(e)||5<Math.abs(g))Math.abs(e)>Math.abs(g)?(p=q,$view.css("-webkit-transition","none"),$matte.css("-webkit-transition","none"),clearTextSelections()):(p=n,$view.removeAttr("style"),$body.removeClass("dragging"))}else p==q&&(a.preventDefault(),dPad=0+parseInt(e/15),
$view.css("-webkit-transform","translate3d("+e+"px,0,0) rotate("+0.01*e+"deg)"),a=1-0.5*Math.round(100*(e/$(window).width()))/100,$matte.css("opacity",a))}function f(){view==ITEM&&!0==h&&(h=!1,p!=n&&($body.removeClass("dragging"),0!=e&&(e>$(window).width()/2?closeItemDir("right"):e<-1*($(window).width()/2)&&closeItemDir("left"),$view.removeAttr("style"),$matte.removeAttr("style")),e=0))}var c=0,m=0,e=0,g=0,h=!1,n=0,q=1,r=2,p=r;IS_TOUCH&&(document.addEventListener("touchstart",a),document.addEventListener("touchmove",
d),document.addEventListener("touchend",f));$view.mousedown(a);$body.mousemove(d);$body.mouseup(f);$body.mouseleave(f)}
function AddressBar(){var a="visible",d=function(){document.height<=window.outerHeight&&(document.body.style.height=window.outerHeight+60+"px",$index.css({"-webkit-transition":"none","padding-top":"60px"}));setTimeout(function(){window.scrollTo(0,1);$index.removeAttr("style");a="hidden"},50)},f=function(){$index.css({"-webkit-transition":"none","margin-top":"-60px"});setTimeout(function(){$index.removeAttr("style")},50);setTimeout(function(){$body.removeAttr("style")},250);a="visible"};this.hide=
d;this.show=f;this.toggle=function(){"hidden"==a?f():"visible"==a&&d()}};function clerestorySetup(){$("html").on("click",".box-fold",toggleBox);$("html").on("click",".box-toggle-btn",toggleBox);$("html").on("click",".box-items > li",toggleSpread)}
function toggleBox(a){a.preventDefault();a=$(".box-contents");var d=a.attr("data-box"),f=a.attr("data-spread"),c=$(".box-fold");"spread"==f?toggleSpread():"unfolded"==d?($(".box-fold").parent().removeClass("box-open"),goHere=$(".box-top-point").offset().top,clScrollTo(goHere),$(".box-fold > .frames").stepWise("backward",6,600,function(){}),c.removeClass("unfolded"),a.attr("data-box","folded")):($(".box-fold > .frames").stepWise("forward",6,600,function(){$(".box-fold").parent().addClass("box-open")}),
c.addClass("unfolded"),a.attr("data-box","unfolded"))}function toggleSpread(){var a=$(".box-contents");"spread"==a.attr("data-spread")?(a.attr("data-spread","stacked").removeClass("box-spread"),a=$(".box-top-point").offset().top):(a.attr("data-spread","spread").addClass("box-spread"),a=$(".box-fold").offset().top+$(".box-fold").height());clScrollTo(a)}function clScrollTo(a){if(!IS_TOUCH){var d=$viewScroll.scrollTop();$viewScroll.animate({scrollTop:a+d},"slow")}}
(function(a){a.fn.stepWise=function(d,f,c,m){function e(){pos+=h;q.css("left",pos+"%");pos>n&&0>pos?window.setTimeout(function(){e()},g):(a(".box-fold > .frames").removeAttr("style"),m())}var g=c/f,h=-100,n=-100*(f-1),q=this;"backward"==d?(pos=n,h*=-1):"forward"==d?pos=0:console.log("unkown direction for animation");e();return q}})(jQuery);(function(){var a=Math,d=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"";/android/gi.test(navigator.appVersion);var f=/iphone|ipad/gi.test(navigator.appVersion),c=/playbook/gi.test(navigator.appVersion),m=/hp-tablet/gi.test(navigator.appVersion),e="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,g="ontouchstart"in window&&!m,h=d+"Transform"in document.documentElement.style,n=f||c,q=window.requestAnimationFrame||window.webkitRequestAnimationFrame||
window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){return setTimeout(b,17)},r=window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,p="onorientationchange"in window?"orientationchange":"resize",t=g?"touchstart":"mousedown",u=g?"touchmove":"mousemove",v=g?"touchend":
"mouseup",w=g?"touchcancel":"mouseup",x="translate"+(e?"3d(":"("),y=e?",0)":")",f=function(b,a){var l=document,c;this.wrapper="object"==typeof b?b:l.getElementById(b);this.wrapper.style.overflow="hidden";this.scroller=this.wrapper.children[0];this.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,onRefresh:null,onBeforeScrollStart:function(b){b.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,
onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(c in a)this.options[c]=a[c];this.x=this.options.x;this.y=this.options.y;this.options.useTransform=h?this.options.useTransform:!1;this.options.hScrollbar=this.options.hScroll&&this.options.hScrollbar;this.options.vScrollbar=this.options.vScroll&&this.options.vScrollbar;this.options.useTransition=n&&this.options.useTransition;this.scroller.style[d+"TransitionProperty"]=this.options.useTransform?"-"+d.toLowerCase()+"-transform":
"top left";this.scroller.style[d+"TransitionDuration"]="0";this.scroller.style[d+"TransformOrigin"]="0 0";this.options.useTransition&&(this.scroller.style[d+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)");this.options.useTransform?this.scroller.style[d+"Transform"]=x+this.x+"px,"+this.y+"px"+y:this.scroller.style.cssText+=";position:absolute;top:"+this.y+"px;left:"+this.x+"px";this.refresh();this._bind(p,window);this._bind(t);g||this._bind("mouseout",this.wrapper)};f.prototype={enabled:!0,
x:0,y:0,steps:[],scale:1,handleEvent:function(b){switch(b.type){case t:if(!g&&0!==b.button)break;this._start(b);break;case u:this._move(b);break;case v:case w:this._end(b);break;case p:this._resize();break;case "mouseout":this._mouseout(b);break;case "webkitTransitionEnd":this._transitionEnd(b)}},_resize:function(){this.refresh()},_pos:function(b,a){b=this.hScroll?b:0;a=this.vScroll?a:0;this.options.useTransform?this.scroller.style[d+"Transform"]=x+b+"px,"+a+"px"+y+" scale("+this.scale+")":(b>>=0,
a>>=0,this.scroller.style.left=b+"px",this.scroller.style.top=a+"px");this.x=b;this.y=a},_start:function(b){var a=g?b.touches[0]:b,l,c;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,b);this.options.useTransition&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;if(this.options.momentum&&(this.options.useTransform?(l=getComputedStyle(this.scroller,null)[d+"Transform"].replace(/[^0-9-.,]/g,
"").split(","),c=1*l[4],l=1*l[5]):(c=1*getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,""),l=1*getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),c!=this.x||l!=this.y))this.options.useTransition?this._unbind("webkitTransitionEnd"):r(this.aniTime),this.steps=[],this._pos(c,l);this.startX=this.x;this.startY=this.y;this.pointX=a.pageX;this.pointY=a.pageY;this.startTime=b.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,b);this._bind(u);
this._bind(v);this._bind(w)}},_move:function(b){var d=g?b.touches[0]:b,l=d.pageX-this.pointX,c=d.pageY-this.pointY,f=this.x+l,e=this.y+c,h=b.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,b);this.pointX=d.pageX;this.pointY=d.pageY;if(0<f||f<this.maxScrollX)f=this.options.bounce?this.x+l/2:0<=f||0<=this.maxScrollX?0:this.maxScrollX;if(0<e||e<this.maxScrollY)e=this.options.bounce?this.y+c/2:0<=e||0<=this.maxScrollY?0:this.maxScrollY;this.distX+=l;this.distY+=
c;this.absDistX=a.abs(this.distX);this.absDistY=a.abs(this.distY);6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(e=this.y,c=0):this.absDistY>this.absDistX+5&&(f=this.x,l=0)),this.moved=!0,this._pos(f,e),this.dirX=0<l?-1:0>l?1:0,this.dirY=0<c?-1:0>c?1:0,300<h-this.startTime&&(this.startTime=h,this.startX=this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,b))},_end:function(b){if(!(g&&0!=b.touches.length)){var d=
g?b.changedTouches[0]:b,l,c,f={dist:0,time:0},e={dist:0,time:0},h=(b.timeStamp||Date.now())-this.startTime;l=this.x;c=this.y;this._unbind(u);this._unbind(v);this._unbind(w);this.options.onBeforeScrollEnd&&this.options.onBeforeScrollEnd.call(this,b);if(this.moved){if(300>h&&this.options.momentum){f=l?this._momentum(l-this.startX,h,-this.x,this.scrollerW-this.wrapperW+this.x,this.options.bounce?this.wrapperW:0):f;e=c?this._momentum(c-this.startY,h,-this.y,0>this.maxScrollY?this.scrollerH-this.wrapperH+
this.y:0,this.options.bounce?this.wrapperH:0):e;l=this.x+f.dist;c=this.y+e.dist;if(0<this.x&&0<l||this.x<this.maxScrollX&&l<this.maxScrollX)f={dist:0,time:0};if(0<this.y&&0<c||this.y<this.maxScrollY&&c<this.maxScrollY)e={dist:0,time:0}}f.dist||e.dist?(d=a.max(a.max(f.time,e.time),10),this.scrollTo(l>>0,c>>0,d)):this._resetPos(200)}else{if(g){for(l=d.target;1!=l.nodeType;)l=l.parentNode;"SELECT"!=l.tagName&&("INPUT"!=l.tagName&&"TEXTAREA"!=l.tagName)&&(c=document.createEvent("MouseEvents"),c.initMouseEvent("click",
!0,!0,b.view,1,d.screenX,d.screenY,d.clientX,d.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,0,null),c._fake=!0,l.dispatchEvent(c))}this._resetPos(200)}this.options.onTouchEnd&&this.options.onTouchEnd.call(this,b)}},_resetPos:function(b){var a=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,c=0<=this.y||0<this.maxScrollY?0:this.y<this.maxScrollY?this.maxScrollY:this.y;a==this.x&&c==this.y?this.moved&&(this.options.onScrollEnd&&this.options.onScrollEnd.call(this),this.moved=!1):this.scrollTo(a,
c,b||0)},_mouseout:function(b){var a=b.relatedTarget;if(a)for(;a=a.parentNode;)if(a==this.wrapper)return;this._end(b)},_transitionEnd:function(b){b.target==this.scroller&&(this._unbind("webkitTransitionEnd"),this._startAni())},_startAni:function(){var b=this,c=b.x,d=b.y,f=Date.now(),e,g,h;b.animating||(b.steps.length?(e=b.steps.shift(),e.x==c&&e.y==d&&(e.time=0),b.animating=!0,b.moved=!0,b.options.useTransition?(b._transitionTime(e.time),b._pos(e.x,e.y),b.animating=!1,e.time?b._bind("webkitTransitionEnd"):
b._resetPos(0)):(h=function(){var m=Date.now(),n;m>=f+e.time?(b._pos(e.x,e.y),b.animating=!1,b.options.onAnimationEnd&&b.options.onAnimationEnd.call(b),b._startAni()):(m=(m-f)/e.time-1,g=a.sqrt(1-m*m),m=(e.x-c)*g+c,n=(e.y-d)*g+d,b._pos(m,n),b.animating&&(b.aniTime=q(h)))},h())):b._resetPos(400))},_transitionTime:function(b){this.scroller.style[d+"TransitionDuration"]=b+"ms"},_momentum:function(b,c,d,e,f){c=a.abs(b)/c;var g=c*c/0.0012;0<b&&g>d?(d+=f/(6/(6E-4*(g/c))),c=c*d/g,g=d):0>b&&g>e&&(e+=f/(6/
(6E-4*(g/c))),c=c*e/g,g=e);return{dist:g*(0>b?-1:1),time:c/6E-4>>0}},_offset:function(b){for(var a=-b.offsetLeft,c=-b.offsetTop;b=b.offsetParent;)a-=b.offsetLeft,c-=b.offsetTop;return{left:a,top:c}},_bind:function(b,a,c){(a||this.scroller).addEventListener(b,this,!!c)},_unbind:function(b,a,c){(a||this.scroller).removeEventListener(b,this,!!c)},destroy:function(){this.scroller.style[d+"Transform"]="";this._unbind(p,window);this._unbind(t);this._unbind(u);this._unbind(v);this._unbind(w);this._unbind("mouseout",
this.wrapper);this.options.useTransition&&this._unbind("webkitTransitionEnd");this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var b;this.wrapperW=this.wrapper.clientWidth;this.wrapperH=this.wrapper.clientHeight;this.scrollerW=this.scroller.offsetWidth;this.scrollerH=this.scroller.offsetHeight;this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH;this.dirY=this.dirX=0;this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=
this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);b=this._offset(this.wrapper);this.wrapperOffsetLeft=-b.left;this.wrapperOffsetTop=-b.top;this.scroller.style[d+"TransitionDuration"]="0";this._resetPos(200)},scrollTo:function(b,a,c,d){var e=b;this.stop();e.length||(e=[{x:b,y:a,time:c,relative:d}]);b=0;for(a=e.length;b<a;b++)e[b].relative&&(e[b].x=this.x-e[b].x,e[b].y=this.y-e[b].y),this.steps.push({x:e[b].x,y:e[b].y,time:e[b].time||0});this._startAni()},
scrollToElement:function(b,c){var d;if(b=b.nodeType?b:this.scroller.querySelector(b))d=this._offset(b),d.left+=this.wrapperOffsetLeft,d.top+=this.wrapperOffsetTop,d.left=0<d.left?0:d.left<this.maxScrollX?this.maxScrollX:d.left,d.top=0<d.top?0:d.top<this.maxScrollY?this.maxScrollY:d.top,c=void 0===c?a.max(2*a.abs(d.left),2*a.abs(d.top)):c,this.scrollTo(d.left,d.top,c)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(u);this._unbind(v);this._unbind(w)},enable:function(){this.enabled=
!0},stop:function(){r(this.aniTime);this.steps=[];this.animating=this.moved=!1}};"undefined"!==typeof exports?exports.iScroll=f:window.iScroll=f})();var MY_EMAIL="ebrooks@risd.edu",MY_NAME="Evan Brooks",$view,$viewScroll,$body,$index,$matte,$currItem,$itemName,$itemDate,$itemContent,whichCurrItem,INDEX,ITEM,view,IS_TOUCH,aBar;
$(function(){function a(){msg=$("#copyButton").attr("data-clipboard-text");$("#email").val(msg);el=document.getElementById("email");el.selectionStart=0;el.selectionEnd=el.value.length}$view=$(".view");$viewScroll=$(".view-scroller");$body=$("body");$index=$(".index");$matte=$(".matte");$currItem=null;$itemName=$(".view .title");$itemDate=$(".view .subtitle");$itemContent=$(".view-scroller");whichCurrItem="";IS_TOUCH=isTouchDevice();INDEX=0;ITEM=1;view=INDEX;$.ajaxSetup({cache:!1});$("html").on("click",
"[data-item]",function(a){a.preventDefault();null!=$currItem&&$currItem.removeClass("last-visited");$currItem=$(this);$currItem.addClass("last-visited");openItem($currItem.attr("data-item"))});$matte.click(closeItem);$("html").on("click",".togCap",function(){$(this).parent().toggleClass("show-caption")});draggingSetup();window.addEventListener("popstate",function(){""!=window.location.hash?(whichItem=window.location.hash.split("#/"),openItem(whichItem[1])):closeItem()});$(window).resize(iRefresh);
$(window).on("onorientationchange",iRefresh);$("html").on("click","[data-action = actionsheet]",function(a){a.preventDefault();$body.addClass("action-mode")});$("html").on("click","[data-action = copy]",function(d){d.preventDefault();a()});$(".actions input").blur(function(){$(".actions .flip-wrap").removeClass("flipped")});(new ZeroClipboard($("#copyButton"),{moviePath:"/js/zeroclip.swf"})).on("complete",function(d,f){$("#copyButton").parent().parent().parent().addClass("flipped");a();alert("Copied text to clipboard: "+
f.text)});$("html").on("click","[data-flip]",function(){type=$(this).attr("data-flip");"permanent"==type?$(this).addClass("flipped"):$(this).toggleClass("flipped")});$("html").on("click",".cropped",function(){$(this).toggleClass("uncropped")});clerestorySetup();aBar=new AddressBar;$("html").on("click","[data-action = fullscreen]",function(){aBar.toggle()});IS_TOUCH&&("standalone"in window.navigator&&!window.navigator.standalone)&&$("[data-action = fullscreen]").show();$viewScroll.scroll(function(){var a=
$viewScroll.scrollTop(),f=$(window).height()/4;a<-1*f?closeItem():a+$(window).height()>=$(".inner-scroll-wrap").height()+f&&(closeItemDir("up"),console.log("triggered"));console.log(a+$(window).height()+" >= "+($(".inner-scroll-wrap").height()+f))})});
function openItem(a){history.pushState({},"","#/"+a);view=ITEM;$body.removeClass("item-mode");a!=whichCurrItem?(whichCurrItem=a,url="/item/"+a+".html",$body.addClass("loading"),$viewScroll.scrollTop(0),$.ajax(url).done(function(a){content=a.split("==");setTitle(content[0]);$itemName.html(content[0]);$itemDate.html(content[1]);$itemContent.html("");a=content[2].split("\n#");var f="";for(i=1;i<a.length;i++){content=a[i].split("\n--");contentAttr=content[0].split(":");contentBody=content[1];classNames_str=
'class="'+contentAttr[0]+'"';var c="";if(-1!==classNames_str.indexOf("img")){c="";for(j=1;j<contentAttr.length;j++)src=contentAttr[j].replace(/(^\s+|\s+$)/g,""),c+='<img src="'+src+'">';c+=contentBody}else if(-1!==classNames_str.indexOf("windowed"))c="",src=contentAttr[1].replace(/(^\s+|\s+$)/g,""),c+='<div class="browser">',c+='<img src="'+src+'">',c+="</div>",c+=contentBody;else if(-1!==classNames_str.indexOf("resume")){var c=c+'<ul class="events">',m=a[i].split("------");for(j=1;j<m.length;j++){var e=
m[j].split("--"),g=e[0].split(":"),h=g[0],g=g[1],g=g.replace("(","<i>").replace(")","</i>"),e=e[1].split("\n\n"),n="";for(k=1;k<e.length;k++)n+="<p>"+e[k]+"</p>";c+="<li>";c+='<div class="name">'+g+"</div>";c+='<div class="date">'+h+"</div>";c+='<div class="desc">'+n+"</div>";c+="</li>"}c+="</ul>"}else c=content[1];f+="<section "+classNames_str+">";f+=c;f+="</section>"}$itemContent.append("<div class='inner-scroll-wrap'>"+f+"</div>");$view.waitForImages(function(){$body.removeClass("loading").addClass("item-mode");
iRefresh()})}).error(function(){setTitle("Nothing");$itemName.html("");$itemDate.html("");$itemContent.html('<section class="text">Not available right now</section>');$body.removeClass("loading").addClass("item-mode")})):($body.addClass("item-mode"),setTitle($itemName.text()))}function closeItem(){$body.removeClass("item-mode action-mode");view=INDEX;history.pushState({},"","/");setTitle("Portfolio")}
function closeItemDir(a){$body.addClass("closed-"+a);closeItem();setTimeout(function(){$view.addClass("freeze");$body.removeClass("closed-"+a)},500);setTimeout(function(){$view.removeClass("freeze")},550)}function isTouchDevice(){var a=document.createElement("div");a.setAttribute("ongesturestart","return;");return"function"===typeof a.ongesturestart}function iRefresh(){}
function clearTextSelections(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}function setTitle(a){document.title=MY_NAME+" \u2014 "+a;console.log("set title: "+a)};
