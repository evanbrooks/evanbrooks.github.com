

// Base -----------


html, body, h1, h2, h3, h4, p, ul, li,
figure
	margin: 0
	font-size: 100%
	text-align: left

@mixin nolist
	padding: 0
	list-style: none

@mixin boxfix
	-webkit-box-sizing: border-box
	-moz-box-sizing: border-box
	box-sizing: border-box

@mixin fixlayer
	position: fixed
	top:    0
	left:   0
	right:  0
	bottom: 0

@mixin title
	line-height: 1.15em
	text-align: left
	font:
		size: 4em
		weight: 500

@mixin caption
	font:
		size: 13px
		weight: 500
		family: "Apercu Mono"
	text-transform: uppercase
	letter-spacing: 0.3em

@mixin trans($time)
	-webkit-transition: all $time
	-moz-transition: all $time
	-ms-transition: all $time
	transition: all $time

.no-trans
	-webkit-transition: none !important

.no-scroll
	overflow: hidden !important

// Design -----------

body,
html
	//height: 100%
	//overflow-y: hidden

hr
	border: none
	border-bottom: 1px solid rgba(120,120,120,0.15)

body
	color: black
	background: white
	font:
		family: Apercu
		size: 20px

.scroller
	display: inline-block
	height: 100%

a, a:visited
	color: black
	border:
		bottom: 1px solid transparent
	@include trans(0.5s)
	text:
		decoration: none
	&:hover
		border:
			bottom: 1px solid black

.btn
	@include trans(0.2s)
	@include caption
	@include boxfix
	-webkit-appearance: none
	display: block
	line-height: 40px
	font:
		size: 10px
	padding: 0 20px
	border: 1px solid black
	background: transparent
	color: black
	&:hover
		background: black
		color: white

// Nav -----

nav
	padding: 50px 10%
	left: 0
	right: 0
	top: 0
	position: fixed
	z-index: 2

.title
	@include caption

.subnav
	position: absolute
	right: 10vw
	@include caption
	a
		margin-right: 20px
		padding-bottom: 5px

.next-btn
	@extend .btn
	position: fixed
	top: 0
	right: 0
	bottom: 0
	-webkit-transform: translate3d(20%, 0, 0)
	[data-scroll = end] &
		opacity: 0

.prev-btn
	@extend .btn
	position: fixed
	top: 0
	left: 0
	bottom: 0
	-webkit-transform: translate3d(-20%, 0, 0)
	[data-scroll = begin] &
		opacity: 0

.next-btn:hover,
.prev-btn:hover
	-webkit-transform: translate3d(0, 0, 0)

// Item -----

.items
	//display: inline-block
	//white-space: nowrap
	//height: 100%

.item
	@include boxfix
	-webkit-backface-visibility: hidden
	//white-space: normal
	position: relative
	//height: 100%
	//width: 90%
	max-width: 1200px
	display: inline-block
	//vertical-align: top
	//overflow: hidden
	padding: 180px 17% 50px 10%
	//padding: 180px 200px 100px 100px
 
a.item-name,
	@include trans(0.3s)
	@include title
	z-index: 9
	border-width: 3px
	&:hover
		opacity: 0.8
	.btn
		display: none
		margin-top: 2em

[data-position = above]
	//background: blue
	h2
		bottom: 0
		top: auto

[data-position = below]
	//background: brown

[data-position = current]
	//background: green
	h2
		position: fixed
		top: 0

// Index -----


// Project ------

.archive-name
	@include caption
	padding-bottom: 2em

.archive
	@include nolist
	padding-bottom: 100px
	li
		padding-bottom: 0.5em
		a
			width: 100%


// Figure -------

.item figure
	position: fixed
	text-align: center
	pointer-events: none
	// position: absolute
	left: 100px
	top: 100px
	right: 100px
	bottom: 100px
	@include trans(0.4s)
	opacity: 0
	-webkit-transform: translate3d(50%,0,0) //scale(0.9)
	-webkit-backface-visibility: hidden
	margin: auto
	vertical-align: top
	display: inline-block
	z-index: -1
	-webkit-filter: blur(40px)
	img
		display: block
		margin: auto
		max-height: 100%
		max-width: 100%
		//@include trans(0.5s)

//.item-name:hover + figure
[data-position=current] + figure
	opacity: 1
	-webkit-filter: blur(0px)
	-webkit-transform: translate3d(40%,0,0)
	-webkit-transition-delay: 0.2s
	.viewing-item &
		opacity: 0
		-webkit-transform: translate3d(50%,0,0)

[data-position=above] + figure
	//-webkit-transform: translate3d(60%,-50%,0)

[data-position=below] + figure
	//-webkit-transform: translate3d(60%,50%,0)


.browser
	display: inline-block
	position: relative
	img
		position: relative
		display: inline-block
		box-shadow: 0 0 0 1px #2b2b2b
		padding-top: 25px
		background: #2b2b2b
		@include boxfix
	&::after
		text-align: left
		position: absolute
		top: 0px
		left: 0px
		right: 0px
		height: 25px
		padding: 0 0.8em
		z-index: 999
		//--
		//content: "○○○"
		content: "●●●"
		line-height: 25px
		font-size: 15px
		letter-spacing: 10px
		//--
		color: white
	&:hover::after
		color: rgba(255,255,255,0.5)

// Overlay -----------

.project-back
	@include fixlayer
	@include trans(0.3s)
	background: hsla(0,0,5%,0.9)
	pointer-events: none
	opacity: 0
	z-index: 3
	.viewing-item &
		opacity: 1
		pointer-events: auto

.project-title
	@include title
	@include trans(0.3s)
	position: fixed
	display: none
	top: 0
	color: white
	left: 0
	z-index: 5
	pointer-events: none
	-webkit-backface-visibility: hidden
	-webkit-transform: translate3d(0,0,0)

.project
	@include fixlayer
	z-index: 4
	padding: 300px 10% 0
	white-space: normal
	text-align: center
	margin: auto
	color: white
	opacity: 0
	overflow: scroll
	@include trans(0.4s)
	-webkit-transform: translate3d(0, 100%, 0) //scale(1.1)
	pointer-events: none
	.viewing-item &
		opacity: 1
		pointer-events: auto
		-webkit-transform: translate3d(0, 0, 0) scale(1)
	h2, h3, h4, p, ul
		max-width: 600px
		width: 100%
		padding: 0 0 1.5em
		//margin: auto
	a
		color: white
		border-color: white
	[data-item-link]
		@include caption
		@include trans(0.1s)
		border: 1px solid rgba(255,255,255,0.5)
		padding: 5px 10px
		&:hover
			background: white
			color: black
	h3
		margin-top: 3rem
		position: relative
		em
			@include caption
			font-style: normal
			float: right
	h4
		@include caption
	p
		font-weight: 300

.being-viewed
	opacity: 0 !important

.project figure
	max-width: 1800px
	margin: auto
	padding-bottom: 1.5em
	img
		display: block
		width: 100%
		margin: auto

.project .row2
	img
		width: 50%
		float: left
		@include boxfix
	&::before, &::after
		content: ""
		display: table
		clear: both

.lightbox-back
	@include fixlayer
	z-index: 8
	background: hsla(0,0,10%,0.9)
	pointer-events: none
	opacity: 0
	@include trans(0.5s)
	.viewing-lightbox &
		opacity: 1
		pointer-events: auto
.lightbox
	z-index: 9
	display: none
	position: fixed
	overflow: scroll
	top:    0
	left:   0
	box-shadow: inset 0 0 0 1px red
	img
		//max-width: 100%
		width: 100%
		//max-height: 100%
		margin: auto
		display: block

.ex
	@include trans(0.2s)
	cursor: pointer
	position: fixed
	z-index: 7
	top: 50px
	right: 10%
	font-size: 80px
	width: 40px
	text-align: center
	line-height: 40px
	padding: 15px
	border-radius: 50%
	opacity: 0
	color: white
	-webkit-transform: scale(0)
	.viewing-item &
		opacity: 1
		-webkit-transform: scale(1)
	&:hover
		opacity: 0.5
		// box-shadow: 0 0 0 2px black

@-webkit-keyframes spin
	0%
		-webkit-transform: rotate(0deg)
	25%
		-webkit-transform: rotate(90deg) scale(1)
	50%
		-webkit-transform: rotate(180deg) scale(1.5)
	75%
		-webkit-transform: rotate(270deg) scale(1)
	87.5%
		-webkit-transform: rotate(295deg) scale(1.4)
	100%
		-webkit-transform: rotate(360deg) scale(1)
		//background: red

.spinner
	.viewing-item &
		opacity: 1
		-webkit-transform: scale(1) rotate(45deg) 
		-webkit-animation: none
	.viewing-item-ready.loading &
		//box-shadow: 0 0 0 5px white
		-webkit-animation: spin 1.5s infinite
	@include trans(0.2s)
	cursor: pointer
	position: fixed
	z-index: 8
	opacity: 0
	$w: 80
	$h: 6
	border-radius: 50%
	-webkit-transform: scale(0) rotate(45deg) 
	top: 10%
	right: 10%
	padding: $w/2 + 0px
	&:hover
		opacity: 0.5
	i
		display: block
		position: absolute
		background: white
		width: $h + 0px
		left: $w/2 - $h/2 + 0px
		height: $w + 0px
		top:  0px
	i:nth-child(2)
		height: $h + 0px
		top: $w/2 - $h/2 + 0px
		width: $w + 0px
		left: 0px

// @ Media -------------

@media (max-width: 900px)
	.item
		padding: 160px 10vw 10px

@media (max-width: 700px)
	.item
		width: 100vw
		padding: 120px 10vw 10px
	a.item-name,
	.project-title
		font-size: 3em
	.ex
		font-size: 40px
		right: 5%
		top: 5%
	.subnav
		position: fixed
		bottom: 30px
		left: 10%
	.project figure
		margin: 0 -10vw

@media (max-width: 500px)
	a.item-name,
	.project-title
		font-size: 2em

@media (max-height: 500px)
	a.item-name,
	.project-title
		font-size: 3em


// Extras -------------


// body
// 	&::-webkit-scrollbar
// 		height: 10px
// 		background: white
// 	&::-webkit-scrollbar-thumb
// 		background: rgba(0,0,0,1)
// 		&:hover
// 			background: rgba(0,0,0,0.6)
